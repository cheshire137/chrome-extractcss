(function(){function a(s,f){var h,m=0,i=s.length,t,e="",p,g,q,k,o,y,u,d,r=true,j=false,n;h=arguments.length>1?f:{};if(typeof h.indent==="undefined"){h.indent="    "}if(typeof h.openbrace==="string"){r=(h.openbrace==="end-of-line")}if(typeof h.autosemicolon==="boolean"){j=h.autosemicolon}function l(z){return(z===" ")||(z==="\n")||(z==="\t")||(z==="\r")||(z==="\f")}function b(z){return(z==="'")||(z==='"')}function c(z){return(p>="a"&&p<="z")||(p>="A"&&p<="Z")||(p>="0"&&p<="9")||"-_*.:#".indexOf(z)>=0}function x(){var z;for(z=y;z>0;z-=1){e+=h.indent}}function w(){e=n(e);if(r){e+=" {"}else{e+="\n";x();e+="{"}if(g!=="\n"){e+="\n"}y+=1}function v(){var z;y-=1;e=n(e);if(j){z=e.charAt(e.length-1);if(z!==";"&&z!=="{"){e+=";"}}e+="\n";x();e+="}";t.push(e);e=""}if(String.prototype.trimRight){n=function(z){return z.trimRight()}}else{n=function(z){return z.replace(/\s+$/,"")}}o={Start:0,AtRule:1,Block:2,Selector:3,Ruleset:4,Property:5,Separator:6,Expression:7,URL:8};y=0;k=o.Start;d=false;t=[];s=s.replace(/\r\n/g,"\n");while(m<i){p=s.charAt(m);g=s.charAt(m+1);m+=1;if(b(u)){e+=p;if(p===u){u=null}if(p==="\\"&&g===u){e+=g;m+=1}continue}if(b(p)){e+=p;u=p;continue}if(d){e+=p;if(p==="*"&&g==="/"){d=false;e+=g;m+=1}continue}else{if(p==="/"&&g==="*"){d=true;e+=p;e+=g;m+=1;continue}}if(k===o.Start){if(t.length===0){if(l(p)&&e.length===0){continue}}if(p<=" "||p.charCodeAt(0)>=128){k=o.Start;e+=p;continue}if(c(p)||(p==="[")||(p==="@")){q=n(e);if(q.length===0){if(t.length>0){e="\n\n"}}else{if(q.charAt(q.length-1)==="}"||q.charAt(q.length-1)===";"){e=q+"\n\n"}else{while(true){g=e.charAt(e.length-1);if(g!==" "&&g.charCodeAt(0)!==9){break}e=e.substr(0,e.length-1)}}}e+=p;k=(p==="@")?o.AtRule:o.Selector;continue}}if(k===o.AtRule){if(p===";"){e+=p;k=o.Start;continue}if(p==="{"){q=n(e);w();k=(q==="@font-face")?o.Ruleset:o.Block;continue}e+=p;continue}if(k===o.Block){if(c(p)){q=n(e);if(q.length===0){if(t.length>0){e="\n\n"}}else{if(q.charAt(q.length-1)==="}"){e=q+"\n\n"}else{while(true){g=e.charAt(e.length-1);if(g!==" "&&g.charCodeAt(0)!==9){break}e=e.substr(0,e.length-1)}}}x();e+=p;k=o.Selector;continue}if(p==="}"){v();k=o.Start;continue}e+=p;continue}if(k===o.Selector){if(p==="{"){w();k=o.Ruleset;continue}if(p==="}"){v();k=o.Start;continue}e+=p;continue}if(k===o.Ruleset){if(p==="}"){v();k=o.Start;if(y>0){k=o.Block}continue}if(p==="\n"){e=n(e);e+="\n";continue}if(!l(p)){e=n(e);e+="\n";x();e+=p;k=o.Property;continue}e+=p;continue}if(k===o.Property){if(p===":"){e=n(e);e+=": ";k=o.Expression;if(l(g)){k=o.Separator}continue}if(p==="}"){v();k=o.Start;if(y>0){k=o.Block}continue}e+=p;continue}if(k===o.Separator){if(!l(p)){e+=p;k=o.Expression;continue}if(b(g)){k=o.Expression}continue}if(k===o.Expression){if(p==="}"){v();k=o.Start;if(y>0){k=o.Block}continue}if(p===";"){e=n(e);e+=";\n";k=o.Ruleset;continue}e+=p;if(p==="("){if(e.charAt(e.length-2)==="l"&&e.charAt(e.length-3)==="r"&&e.charAt(e.length-4)==="u"){k=o.URL;continue}}continue}if(k===o.URL){if(p===")"&&e.charAt(e.length-1!=="\\")){e+=p;k=o.Expression;continue}}e+=p}e=t.join("")+e;return e}if(typeof exports!=="undefined"){module.exports=exports=a}else{if(typeof window==="object"){window.cssbeautify=a}}}());